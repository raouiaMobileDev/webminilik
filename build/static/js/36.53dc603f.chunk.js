(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{272:function(e,t,a){"use strict";a.d(t,"c",function(){return p}),a.d(t,"d",function(){return h}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return g}),a.d(t,"h",function(){return E}),a.d(t,"f",function(){return b}),a.d(t,"g",function(){return v}),a.d(t,"e",function(){return y}),a.d(t,"j",function(){return w}),a.d(t,"i",function(){return k}),a.d(t,"k",function(){return C});var n=a(23),r=a(285),l=a.n(r),o=(a(289),a(273)),s=a.n(o),c="https://minilik-4e824.firebaseio.com/",i="AIzaSyD2raRNg7gb1bFPbB3WENlXEq2WEwI8NCA",u="https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=".concat(i),d="https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=".concat(i);l.a.initializeApp({apiKey:"AIzaSyD2raRNg7gb1bFPbB3WENlXEq2WEwI8NCA",authDomain:"minilik-4e824.firebaseapp.com",databaseURL:"https://minilik-4e824.firebaseio.com",projectId:"minilik-4e824",storageBucket:"minilik-4e824.appspot.com",messagingSenderId:"41678970934"});var m=l.a.database(),p=function(e){console.log("**********call the data base"),m.ref("pubs").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},h=function(e){console.log("**********call the data base"),m.ref("restaurants").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},f=function(e){console.log("**********call the data base"),m.ref("plats").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},g=function(e){console.log("**********call the data base"),m.ref("categories").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},E=function(){var e=[];return m.ref("restaurants").once("value").then(function(t){t.key;var a=t.val();console.log(a),t.forEach(function(t){e.push(Object(n.a)({id:t.key},t.val()))}),console.log(e)}).catch(function(e){console.log("Error fetching data",e)}),e};function b(){return{type:"GET_RESTAURANTS",payload:s()("".concat(c,"/restaurants.json")).then(function(e){var t=[];for(var a in e.data)t.push(Object(n.a)({},e.data[a],{id:a}));return t})}}var v=function(){var e=[];return m.ref("categories").once("value").then(function(t){t.key,t.val();t.forEach(function(t){e.push(Object(n.a)({id:t.key},t.val()))})}).catch(function(e){console.log("Error fetching data",e)}),e};function y(){return{type:"GET_COMMANDS",payload:s()("".concat(c,"/Commands.json")).then(function(e){var t=[];for(var a in e.data)t.push(Object(n.a)({},e.data[a],{id:a}));return t})}}var w=function(e){return{type:"register_user",payload:s()({method:"POST",url:u,data:{email:e.email,password:e.password,returnSecureToken:!0},headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){return!1})}};function k(e){return{type:"sign_user",payload:s()({method:"POST",url:d,data:{email:e.email,password:e.password,returnSecureToken:!0},headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){return!1})}}var C=function(e,t){m.ref("Commands/"+e).update(t)}},637:function(e,t,a){"use strict";a.r(t);var n=a(89),r=a(90),l=a(92),o=a(91),s=a(93),c=a(94),i=a(0),u=a.n(i),d=a(265),m=a(273),p=a.n(m),h=a(272),f=a(99),g=a(30),E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.toggleFade=a.toggleFade.bind(Object(c.a)(Object(c.a)(a))),a.state={collapse:!0,fadeIn:!0,timeout:300,restaurant_name:"",restaurant_address:"",restaurant_tables:"",selectedFile:"Raouia",emailUser:"",passwordUser:"",hasErrors:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"fileChangedHandler",value:function(e){this.setState({selectedFile:e.target.files[0]}),console.log(this.state.selectedFile),console.log("************coco est *****************")}},{key:"handleChange_restName",value:function(e){this.setState({restaurant_name:e.target.value})}},{key:"handleChange_restAddress",value:function(e){this.setState({restaurant_address:e.target.value})}},{key:"handleChange_table",value:function(e){this.setState({restaurant_tables:e.target.value})}},{key:"handleChange_emailUser",value:function(e){this.setState({emailUser:e.target.value})}},{key:"handleChange_passwordUser",value:function(e){this.setState({passwordUser:e.target.value})}},{key:"uploadHandler",value:function(){var e=this,t=new FormData;t.append("image",this.state.selectedFile,this.state.selectedFile.name),p.a.post("https://minilik.000webhostapp.com/restaurant.php",t).then(function(e){console.log(e)});var a={email:this.state.emailUser,password:this.state.passwordUser};this.props.signUp(a).then(function(){if(console.log(e.props.User),e.props.User.userData.uid){var t={name:e.state.restaurant_name,address:e.state.restaurant_address,tables:e.state.restaurant_tables,url:"https://minilik.000webhostapp.com/restaurant/"+e.state.selectedFile.name,uid:e.props.User.userData.uid};Object(h.d)(t)}else e.setState({hasErrors:!0})})}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState(function(e){return{fadeIn:!e}})}},{key:"render",value:function(){var e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35].map(function(e){return u.a.createElement("option",{key:e,value:e}," ",e," ")});return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(d.ib,null,u.a.createElement(d.u,{xs:"12"},u.a.createElement(d.B,{timeout:this.state.timeout,in:this.state.fadeIn},u.a.createElement(d.i,null,u.a.createElement(d.n,null,u.a.createElement("strong",null,"Authentification")),u.a.createElement(d.j,null,u.a.createElement(d.H,{className:"mb-3"},u.a.createElement(d.I,{addonType:"prepend"},u.a.createElement(d.J,null,u.a.createElement("i",{className:"icon-user"}))),u.a.createElement(d.G,{type:"text",name:"email",onChange:this.handleChange_emailUser.bind(this),placeholder:"Entrer votre adresse email",autoComplete:"username"})),u.a.createElement(d.H,{className:"mb-4"},u.a.createElement(d.I,{addonType:"prepend"},u.a.createElement(d.J,null,u.a.createElement("i",{className:"icon-lock"}))),u.a.createElement(d.G,{type:"password",name:"password",onChange:this.handleChange_passwordUser.bind(this),placeholder:"Entrer votre mot de passe",autoComplete:"current-password"})))),u.a.createElement(d.i,null,u.a.createElement(d.n,null,u.a.createElement("strong",null,"Ajouter un salon de th\xe9")),u.a.createElement(d.j,null,u.a.createElement(d.C,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"text-input"},"Nom de Restaurant ")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"text",id:"text-input",name:"rest_name",onChange:this.handleChange_restName.bind(this),placeholder:"Text"}),u.a.createElement(d.F,{color:"muted"},"Ce champ est obligatoire"))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"text-input"}," Adresse de restaurant ")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"text",id:"text-input",name:"rest_address",onChange:this.handleChange_restAddress.bind(this),placeholder:"Text"}),u.a.createElement(d.F,{color:"muted"},"Ce champ est obligatoire"))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"select"},"Nombre de tables")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"select",name:"select",id:"select",onChange:this.handleChange_table.bind(this)},u.a.createElement("option",{value:"0"},"S\xe9lectionner le nombre de tables "),e))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"file-input"},"Ajouter une image")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"file",id:"file-input",name:"myImage",onChange:this.fileChangedHandler.bind(this)}))))),u.a.createElement(d.l,null,u.a.createElement(d.e,{type:"submit",size:"sm",color:"primary",onClick:this.uploadHandler.bind(this)},u.a.createElement("i",{className:"fa fa-dot-circle-o"}),"Submit"),u.a.createElement(d.e,{type:"reset",size:"sm",color:"danger"},u.a.createElement("i",{className:"fa fa-ban"})," Reset")))))))}}]),t}(i.Component);t.default=Object(f.b)(function(e){return console.log(e),{User:e.User}},function(e){return Object(g.b)({signUp:h.j},e)})(E)}}]);
//# sourceMappingURL=36.53dc603f.chunk.js.map