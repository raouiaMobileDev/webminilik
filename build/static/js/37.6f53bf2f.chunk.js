(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{272:function(e,t,a){"use strict";a.d(t,"c",function(){return p}),a.d(t,"d",function(){return h}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return g}),a.d(t,"h",function(){return E}),a.d(t,"f",function(){return b}),a.d(t,"g",function(){return y}),a.d(t,"e",function(){return v}),a.d(t,"j",function(){return k}),a.d(t,"i",function(){return C}),a.d(t,"k",function(){return w});var n=a(23),o=a(285),l=a.n(o),i=(a(289),a(273)),r=a.n(i),c="https://minilik-4e824.firebaseio.com/",s="AIzaSyD2raRNg7gb1bFPbB3WENlXEq2WEwI8NCA",u="https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=".concat(s),d="https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=".concat(s);l.a.initializeApp({apiKey:"AIzaSyD2raRNg7gb1bFPbB3WENlXEq2WEwI8NCA",authDomain:"minilik-4e824.firebaseapp.com",databaseURL:"https://minilik-4e824.firebaseio.com",projectId:"minilik-4e824",storageBucket:"minilik-4e824.appspot.com",messagingSenderId:"41678970934"});var m=l.a.database(),p=function(e){console.log("**********call the data base"),m.ref("pubs").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},h=function(e){console.log("**********call the data base"),m.ref("restaurants").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},f=function(e){console.log("**********call the data base"),m.ref("plats").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},g=function(e){console.log("**********call the data base"),m.ref("categories").push(e).then(function(){console.log("Data is saved!")}).catch(function(e){console.log("Failed.",e)})},E=function(){var e=[];return m.ref("restaurants").once("value").then(function(t){t.key;var a=t.val();console.log(a),t.forEach(function(t){e.push(Object(n.a)({id:t.key},t.val()))}),console.log(e)}).catch(function(e){console.log("Error fetching data",e)}),e};function b(){return{type:"GET_RESTAURANTS",payload:r()("".concat(c,"/restaurants.json")).then(function(e){var t=[];for(var a in e.data)t.push(Object(n.a)({},e.data[a],{id:a}));return t})}}var y=function(){var e=[];return m.ref("categories").once("value").then(function(t){t.key,t.val();t.forEach(function(t){e.push(Object(n.a)({id:t.key},t.val()))})}).catch(function(e){console.log("Error fetching data",e)}),e};function v(){return{type:"GET_COMMANDS",payload:r()("".concat(c,"/Commands.json")).then(function(e){var t=[];for(var a in e.data)t.push(Object(n.a)({},e.data[a],{id:a}));return t})}}var k=function(e){return{type:"register_user",payload:r()({method:"POST",url:u,data:{email:e.email,password:e.password,returnSecureToken:!0},headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){return!1})}};function C(e){return{type:"sign_user",payload:r()({method:"POST",url:d,data:{email:e.email,password:e.password,returnSecureToken:!0},headers:{"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){return!1})}}var w=function(e,t){m.ref("Commands/"+e).update(t)}},638:function(e,t,a){"use strict";a.r(t);var n=a(89),o=a(90),l=a(92),i=a(91),r=a(93),c=a(94),s=a(0),u=a.n(s),d=a(265),m=a(273),p=a.n(m),h=a(272),f=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).SelectOptionRestaurants=function(){return a.state.listRestaurant.map(function(e){return u.a.createElement("option",{value:"{item.id}"}," ",e.name," ")})},a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.toggleFade=a.toggleFade.bind(Object(c.a)(Object(c.a)(a))),a.state={collapse:!0,fadeIn:!0,timeout:300,listRestaurants:Object(h.h)(),listCategories:Object(h.g)(),plat_name:"",plat_price:"",plat_restaurant:"",plat_category:"",selectedFile:"Raouia"},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"handleChange_platName",value:function(e){this.setState({plat_name:e.target.value})}},{key:"handleChange_platPrice",value:function(e){this.setState({plat_price:e.target.value})}},{key:"handleChange_platRestaurant",value:function(e){var t,a=e.target.value;this.state.listRestaurants.some(function(e,n,o){if(e.id===a)return t=e,!0}),console.log(t),"undefined"!==t&&(this.setState({plat_restaurant:t}),console.log("************ option restaurant *****************"),console.log(t))}},{key:"handleChange_platCategory",value:function(e){var t,a=e.target.value;this.state.listCategories.some(function(e,n,o){if(e.id===a)return t=e,!0}),console.log(t),"undefined"!==t&&this.setState({plat_category:t})}},{key:"fileChangedHandler",value:function(e){this.setState({selectedFile:e.target.files[0]}),console.log(this.state.selectedFile),console.log("************coco est *****************")}},{key:"uploadHandler",value:function(){console.log("************coco est bouton *****************");var e=new FormData;e.append("image",this.state.selectedFile,this.state.selectedFile.name),p.a.post("https://minilik.000webhostapp.com/plat.php",e).then(function(e){console.log(e)}),console.log("**** go to the base*******");var t={name:this.state.plat_name,price:this.state.plat_price,restaurant:this.state.plat_restaurant,category:this.state.plat_category,url:"https://minilik.000webhostapp.com/plat/"+this.state.selectedFile.name};Object(h.b)(t)}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState(function(e){return{fadeIn:!e}})}},{key:"render",value:function(){var e=this.state.listRestaurants.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.name," (",e.address,")")}),t=this.state.listCategories.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id},e.name," ")});return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(d.ib,null,u.a.createElement(d.u,{xs:"12"},u.a.createElement(d.B,{timeout:this.state.timeout,in:this.state.fadeIn},u.a.createElement(d.i,null,u.a.createElement(d.n,null,u.a.createElement("strong",null,"Ajouter un plat")),u.a.createElement(d.j,null,u.a.createElement(d.C,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"text-input"},"Nom de plat ")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"text",id:"text-input",name:"plat_name",onChange:this.handleChange_platName.bind(this),placeholder:"Text"}),u.a.createElement(d.F,{color:"muted"},"Ce champ est obligatoire"))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"text-input"}," Prix de plat  ")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"text",id:"text-input",name:"plat_price",onChange:this.handleChange_platPrice.bind(this),placeholder:"Text"}),u.a.createElement(d.F,{color:"muted"},"Ce champ est obligatoire"))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"select"},"Salon de th\xe9")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"select",name:"select",id:"select",onChange:this.handleChange_platRestaurant.bind(this)},u.a.createElement("option",{value:"0"},"S\xe9lectionner le salon de th\xe9 "),e))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"select"},"Cat\xe9gorie de plat")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"select",name:"select",id:"select",onChange:this.handleChange_platCategory.bind(this)},u.a.createElement("option",{value:"0"},"S\xe9lectionner la categorie de plat "),t))),u.a.createElement(d.E,{row:!0},u.a.createElement(d.u,{md:"3"},u.a.createElement(d.L,{htmlFor:"file-input"},"Ajouter une image")),u.a.createElement(d.u,{xs:"12",md:"9"},u.a.createElement(d.G,{type:"file",id:"file-input",name:"myImage",onChange:this.fileChangedHandler.bind(this)}))))),u.a.createElement(d.l,null,u.a.createElement(d.e,{type:"submit",size:"sm",color:"primary",onClick:this.uploadHandler.bind(this)},u.a.createElement("i",{className:"fa fa-dot-circle-o"}),"Submit"),u.a.createElement(d.e,{type:"reset",size:"sm",color:"danger"},u.a.createElement("i",{className:"fa fa-ban"})," Reset")))))))}}]),t}(s.Component);t.default=f}}]);
//# sourceMappingURL=37.6f53bf2f.chunk.js.map